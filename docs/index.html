<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go-JWT Tool | RZH Badhon</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter and Fira Code -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <!-- Feather Icons for social links -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        /* Custom styles for the neon/tech theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #e5e7eb;
        }
        .font-mono {
            font-family: 'Fira Code', monospace;
        }
        /* Neon glow effects */
        .neon-glow-cyan {
            box-shadow: 0 0 5px rgba(34, 211, 238, 0.8), 0 0 10px rgba(34, 211, 238, 0.6);
        }
        .neon-text-cyan {
            text-shadow: 0 0 3px rgba(34, 211, 238, 0.9), 0 0 8px rgba(34, 211, 238, 0.7);
        }
        .focused-glow:focus {
            box-shadow: 0 0 8px rgba(34, 211, 238, 0.7);
        }
        /* Glassmorphism card effect */
        .card-bg {
            background-color: rgba(17, 24, 39, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(55, 65, 81, 0.5);
        }
        .output-box {
            background-color: rgba(10, 10, 10, 0.8);
        }
        /* Background animated grid effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image:
                linear-gradient(to right, rgba(37, 99, 235, 0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(37, 99, 235, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: pan 150s linear infinite;
            z-index: -1;
        }
        @keyframes pan {
            0% { background-position: 0 0; }
            100% { background-position: 1200px 1200px; }
        }
        /* Social icon styling */
        .social-link {
            transition: all 0.3s ease;
            color: #9ca3af; /* Gray */
        }
        .social-link:hover {
            color: #22d3ee; /* Cyan */
            transform: scale(1.1) translateY(-2px);
            filter: drop-shadow(0 0 5px rgba(34, 211, 238, 0.8));
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 overflow-hidden">

    <main class="w-full max-w-4xl mx-auto space-y-6">
        <!-- Header Section with Logo -->
        <header class="text-center flex flex-col items-center space-y-4">
            <!-- Go Gopher Logo SVG -->
            <svg class="w-20 h-20" viewBox="0 0 128 128" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M64 15.9999C74.2347 15.9999 84.053 19.3475 92.0533 25.4371C100.054 31.5267 105.857 40.0125 108.667 49.5999H82.6667C81.1667 46.9999 78.8333 44.9999 76 43.8332C73.1667 42.6665 69.9667 42.4999 66.9 43.3332C63.8333 44.1665 61.1667 45.9999 59.3333 48.4999C57.5 50.9999 56.6667 53.9999 56.6667 56.9999V58.6665C56.6667 63.8332 58.8333 68.8332 62.6667 72.4999C66.5 76.1665 71.6333 78.1665 76.9333 78.1665H84C86.1 78.1665 88.1333 77.4999 89.8333 76.3332C91.5333 75.1665 92.8 73.4999 93.4 71.5999H110.533C108.667 80.9999 103.1 89.4999 95.1667 95.5999C87.2333 101.7 77.4333 105 67.2 105C64.5333 105 61.9 104.733 59.3333 104.2C46.6667 101.833 35.8333 93.4999 29.3333 81.6665C22.8333 69.8332 21.3333 55.8332 25.2 42.8332C29.0667 29.8332 38 19.4999 50 13.9999C54.4 12.1665 59.1333 11.3332 63.9333 11.4999C69.9 11.4999 75.7 13.1665 80.6667 16.1665C75.2 15.9999 69.6667 15.9999 64 15.9999Z" fill="#22d3ee" style="filter: drop-shadow(0 0 6px rgba(34, 211, 238, 0.7));"></path>
                <circle cx="45.3333" cy="37.3333" r="8" fill="#0a0a0a"></circle>
                <circle cx="82.6667" cy="37.3333" r="8" fill="#0a0a0a"></circle>
            </svg>
            <h1 class="text-4xl md:text-5xl font-bold text-cyan-400 neon-text-cyan tracking-wider">
                Go-JWT Tool
            </h1>
            <p class="text-gray-400 mt-2 max-w-md">
                A simple and modern interface for decoding and verifying JWTs, powered by a Go backend.
            </p>
        </header>

        <!-- Main Application Card -->
        <div class="card-bg rounded-2xl p-6 md:p-8 shadow-2xl">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Input Section -->
                <div class="space-y-6">
                    <div>
                        <label for="jwt-token" class="block text-sm font-medium text-gray-300 mb-2">Encoded JWT Token</label>
                        <textarea id="jwt-token" rows="8" class="font-mono w-full p-3 bg-gray-900 border border-gray-700 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-300 resize-none focused-glow" placeholder="Paste your token here..."></textarea>
                    </div>
                    <div>
                        <label for="jwt-secret" class="block text-sm font-medium text-gray-300 mb-2">HMAC Secret (for verification)</label>
                        <input type="text" id="jwt-secret" class="font-mono w-full p-3 bg-gray-900 border border-gray-700 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-300 focused-glow" placeholder="Your-secret">
                    </div>
                    <button id="process-btn" class="w-full bg-cyan-500 text-gray-900 font-bold py-3 px-4 rounded-lg hover:bg-cyan-400 transition-all duration-300 transform hover:scale-[1.03] neon-glow-cyan focus:outline-none focus:ring-4 focus:ring-cyan-500/50">
                        Decode & Verify
                    </button>
                </div>

                <!-- Output Section -->
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <label class="block text-sm font-medium text-gray-300">Decoded Header</label>
                            <span id="signature-status" class="px-3 py-1 text-xs font-bold rounded-full transition-all duration-300"></span>
                        </div>
                        <pre class="output-box font-mono p-4 rounded-lg border border-gray-700 text-sm overflow-x-auto h-[124px]"><code id="decoded-header" class="text-pink-400"></code></pre>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Decoded Payload</label>
                        <pre class="output-box font-mono p-4 rounded-lg border border-gray-700 text-sm overflow-x-auto h-[124px]"><code id="decoded-payload" class="text-violet-400"></code></pre>
                    </div>
                    <div id="error-box" class="hidden bg-red-900/50 border border-red-700 text-red-300 text-sm rounded-lg p-3 transition-all duration-300">
                        <p id="error-message"></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm space-y-4">
             <div class="flex justify-center items-center space-x-6">
                <a href="https://github.com/rzhbadhon" target="_blank" rel="noopener noreferrer" class="social-link">
                    <i data-feather="github" class="w-6 h-6"></i>
                </a>
                <a href="https://linkedin.com/in/rzhbadhon" target="_blank" rel="noopener noreferrer" class="social-link">
                    <i data-feather="linkedin" class="w-6 h-6"></i>
                </a>
                <a href="https://www.facebook.com/share/1CRQkgRmBW/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer" class="social-link">
                    <i data-feather="facebook" class="w-6 h-6"></i>
                </a>
                <a href="https://www.instagram.com/ig_rzhbadhon?igsh=dDY4Ym91ZTVjeXAy&utm_source=qr" target="_blank" rel="noopener noreferrer" class="social-link">
                    <i data-feather="instagram" class="w-6 h-6"></i>
                </a>
            </div>
            <p>
                Developed by 
                <a href="https://github.com/rzhbadhon" target="_blank" rel="noopener noreferrer" class="font-semibold text-cyan-500 hover:text-cyan-400 transition-colors">
                    Razibul Hasan Badhon
                </a>
            </p>
        </footer>
    </main>

    <script>
        // Initialize Feather Icons
        feather.replace();

        // DOM Elements
        const processBtn = document.getElementById('process-btn');
        const jwtTokenInput = document.getElementById('jwt-token');
        const jwtSecretInput = document.getElementById('jwt-secret');
        const decodedHeaderOutput = document.getElementById('decoded-header');
        const decodedPayloadOutput = document.getElementById('decoded-payload');
        const signatureStatus = document.getElementById('signature-status');
        const errorBox = document.getElementById('error-box');
        const errorMessage = document.getElementById('error-message');

        // Backend API endpoint
        // Change this line in index.html
        const API_URL = 'https://go-jwt-authenticator-tool.onrender.com/tool';

        // Function to pretty-print JSON
        function formatJSON(data) {
            if (!data) return '';
            try {
                return JSON.stringify(data, null, 2);
            } catch (error) {
                return 'Error formatting JSON.';
            }
        }

        // Function to clear all outputs and status
        function clearOutput() {
            decodedHeaderOutput.textContent = '';
            decodedPayloadOutput.textContent = '';
            signatureStatus.textContent = '';
            signatureStatus.className = 'px-3 py-1 text-xs font-bold rounded-full transition-all duration-300';
            errorBox.classList.add('hidden');
            errorMessage.textContent = '';
        }

        // Main function to process the JWT
        async function processJWT() {
            clearOutput();
            processBtn.disabled = true;
            processBtn.textContent = 'Processing...';

            const token = jwtTokenInput.value.trim();
            const secret = jwtSecretInput.value.trim();

            if (!token) {
                showError('JWT Token cannot be empty.');
                resetButton();
                return;
            }

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ token: token, secret: secret, alg: 'HS256' })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.errors ? data.errors.join(', ') : `HTTP error! Status: ${response.status}`);
                }
                
                // Update UI with response data
                decodedHeaderOutput.textContent = formatJSON(data.header);
                decodedPayloadOutput.textContent = formatJSON(data.payload);

                if (data.valid_signature) {
                    signatureStatus.textContent = 'Valid Signature';
                    signatureStatus.classList.add('bg-green-500/20', 'text-green-300');
                } else {
                    signatureStatus.textContent = 'Invalid Signature';
                    signatureStatus.classList.add('bg-red-500/20', 'text-red-300');
                }
                
                if (data.errors && data.errors.length > 0) {
                   showError(data.errors.join('\n'));
                }

            } catch (error) {
                console.error('Fetch Error:', error);
                showError(error.message || 'Could not connect to the backend server. Is it running?');
            } finally {
                resetButton();
            }
        }
        
        function showError(message) {
            errorMessage.textContent = message;
            errorBox.classList.remove('hidden');
        }

        function resetButton() {
            processBtn.disabled = false;
            processBtn.textContent = 'Decode & Verify';
        }

        // Event Listener
        processBtn.addEventListener('click', processJWT);

    </script>
</body>
</html>

